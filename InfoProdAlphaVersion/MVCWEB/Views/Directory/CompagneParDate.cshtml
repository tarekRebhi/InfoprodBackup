@model MVCWEB.Models.DirectoryViewModel

@{
    ViewBag.Title = "CompagneParDate";
    Layout = "~/Views/Shared/_Layout_Qualite.cshtml";
}

@section test{
<script type="text/javascript" src="/Content/template/Layout 1/LTR/assets/js/plugins/pickers/daterangepicker.js"></script>
<div class="form-group">
    <div class="row">
        <div class="col-1">
            <div class="col-xs-4">

                @Html.DropDownList("typeGenerator", Model.topDirectorieDirectories, "-----select-----", htmlAttributes: new { @class = "bootstrap-select", @id = "typeGenerator", @name = "typeGenerator", style = "data-width: 360px;", selected = "selected" })
                @Html.ValidationMessageFor(model => model.topDirectorieDirectories, "", new { @class = "text-danger" })
            </div>
        </div>

        
        <div class="col-1">
            <div class="col-xs-4 date">
                <div class="input-group input-append date">
                    <input type="text" class="form-control" name="date" id="datePicker" />
                    <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                </div>
            </div>
        </div>

    </div>
</div>
<div class="col-1">
    <button id="imedSave" type="submit" class="btn bg-teal-400" data-title="Chercher Enregistrement" value="Chercher Enregistrement" data-toggle="modal">ReCherche <i class="icon-play3 position-right"></i></button>
    @*<button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#modal_theme_info">Launch <i class="icon-play3 position-right"></i></button>*@
</div>
<div id="explore1">
</div>
<div class="row">
    <div class="col-lg-3 col-sm-6">
    </div>

    <div class="col-lg-3 col-sm-6">
        <img id="loadimage" src="~/Content/Loading-GIF-Image-3.gif" style="display: none; align-content:center" />

    </div>
    <div class="col-lg-3 col-sm-6">

    </div>

</div>

<script>
        $('#datePicker')
               .daterangepicker({
                   singleDatePicker: true,
                   locale: {
                       setDate: new Date(),
                       format: 'DD/MM/YYYY',
                       "daysOfWeek": [
            "Dim",
            "Lun",
            "Mar",
            "Mer",
            "Jeu",
            "Ven",
            "Sam"
                       ],
                       "monthNames": [
                           "Jan",
                           "Fev",
                           "Mar",
                           "Avr",
                           "Mai",
                           "Ju",
                           "Jui",
                           "Aou",
                           "Sep",
                           "Oct",
                           "Nov",
                           "December"
                       ],
                   },
                   lan: 'fr',
                   autoclose: true,
               })
               .on('changeDate', function (e) {
                   $('#datepicker').hide();
               });

</script>
<script type="text/javascript">

        $(document).ready(function () {
            $(document).on("click", "#imedSave", function () {
                $('#explore1').hide();

                $('#loadimage').show();

                $.ajax({
                    url: '/Directory/FindCompagneDate',
                    type: 'POST',
                    datatype: 'json',
                    data: {
                        utilisateurs: $("#typeGenerator").val(),
                        date: $("#datePicker").val(),
                    },
                    async: true,
                    success: function (data) {
                        $('#explore1').html(data);
                        $('#errorFile').modal('show');
                        $('#errorFile2').modal('show');

                        //alert("utilisateur"+" "+$("#typeGenerator").val()+" "+""+ $("#datePicker").val())
                    },
                    complete: function () {
                        $('#loadimage').hide();
                        $('#explore1').show();

                    }
                });
            })
        })
</script>

    }
@section testProfile{

    <a class="dropdown-toggle" data-toggle="dropdown">
        <img src=@Model.Url alt="">
        <span>@Model.userName</span>
        <i class="caret"></i>
    </a>
    <ul class="dropdown-menu dropdown-menu-right">

        <li><a href="@Url.Action("logout", "Authentification")"><i class="icon-switch2"></i> Logout</a></li>
    </ul>
}
@section sidebarProfile{

    <a href="#" class="media-left"><img src=@Model.Url class="img-circle img-sm" alt=""></a>
    <div class="media-body">
        <span class="media-heading text-semibold">@Model.userName</span>
        <div class="text-size-mini text-muted">
            <i class="icon-user text-size-small"></i> &nbsp;@Model.pseudoNameEmp
        </div>
    </div>
    <div class="media-right media-middle">

    </div>
}
@section pagetitle{
    <h4> <span class="text-semibold">Espace Qualité</span> -  Accès aux Enregistrements</h4>
}
@section pagetitlebody{
    <li><a href="#"><i class="icon-home2 position-left"></i> Accès aux Enregistrements</a></li>
    <li class="active">Par Compagne</li>
}