@model MVCWEB.Models.DirectoryViewModel

@{
    ViewBag.Title = "RechercheIndiceTel";
    Layout = "~/Views/Shared/_Layout_Qualite.cshtml";
}

@section test{
    <script type="text/javascript" src="/Content/template/Layout 1/LTR/assets/js/plugins/pickers/daterangepicker.js"></script>

    <div class="form-group">
        <div class="row">
            <div class="col-1">
                <div class="col-xs-6">
                    <label class="control-label col-xs-6">Numéro de télephone / Id Hérmes / Nom Compagne</label>
                </div>
                @*<div class="col-xs-4">
                    <label class="control-label col-xs-4">Indice</label>
                </div>*@  
                @*<div class="col-xs-4">
                    <label class="control-label col-xs-4">Sélectionner une date</label>
                </div>*@  
                <div class="col-xs-6">
                    <label class="control-label col-xs-6">plage de  date</label>
                </div>  
            </div>
           
        </div>
        <div class="row">
            <div class="col-1">
                <div class="col-xs-6">
                    @*@Html.EditorFor(model => model.tel, new { htmlAttributes = new { @class = "form-control" , @Id = "tel" } })
                    @Html.ValidationMessageFor(model => model.tel, "", new { @class = "text-danger" })*@
                    <input type="text" required class="form-control" id="tel" placeholder="Entrer le numéro de télephone ou l' ID Hérmes de l'agent ou le nom de compagne" />
                </div>
               @* <div class="col-xs-4">
                    @Html.EditorFor(model => model.indice, new { htmlAttributes = new { @class = "form-control" , @Id = "indice" } })
                    @Html.ValidationMessageFor(model => model.indice, "", new { @class = "text-danger" })
                    <input type="text" class="form-control" id="indice" placeholder="Entrer Indice..."/>
                </div>*@
            </div>
            @*<div class="col-1">
                <div class="col-xs-4 date">
                    <div class="input-group input-append date">
                        <input type="text" class="form-control" placeholder="Sélectionner une Date" name="date" id="datePicker" />
                        <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
                    </div>
                </div>
            </div>*@
            <div class="col-1">
               
                <div class="col-xs-6">

                    <div class="form-group">
                        <div class="input-group">
                            <span class="input-group-addon"><i class="icon-calendar22"></i></span>
                            <input type="text" class="form-control daterange-basic" name="datetimes" id="datetimes" value="01/04/2018 - 10/05/2018">
                        </div>
                    </div>
                </div>
            </div>

       </div>
        <br/>
        <br/>
       <div class="row">
           <div class="col-12">
               <button id="imedSave" type="submit" class="btn bg-teal-400 btn-block" data-title="Chercher Enregistrement" value="Chercher Enregistrement" data-toggle="modal">Recherche <i class="icon-arrow-right14 position-fixed"></i></button>
               @*<button id="stopRecherche" type="submit" class="btn btn-danger" data-title="Annuler la recherche" value="Chercher Enregistrement" data-toggle="modal">Annuler  <i class="icon-switch2"></i></button>*@

           </div>
       </div>
        <div>
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            @Html.HiddenFor(model => model.roleName, new { @Id = "roleName" })
        </div>
    </div>
    
    <div id="explore1">
    </div>
    <div class="row">
        <div class="col-lg-3 col-sm-6">
        </div>
        <div class="col-lg-3 col-sm-6">
            <img id="loadimage" src="~/Content/Loading-GIF-Image-3.gif" style="display: none; align-content:center" />
        </div>
        <div class="col-lg-3 col-sm-6">
        </div>
     </div>
<script>
    var debut;
    var fin;
$(function() {
    $('#datetimes').daterangepicker({

        opens: 'left',
        format: 'DD/MM/YYYY',
        //startdate: new Date(),
        //endDate: new Date(),
        locale: {

            "daysOfWeek": [
      "Dim",
      "Lun",
      "Mar",
      "Mer",
      "Jeu",
      "Ven",
      "Sam"
            ],
            "monthNames": [
                "Jan",
                "Fev",
                "Mar",
                "Avr",
                "Mai",
                "Ju",
                "Jui",
                "Aou",
                "Sep",
                "Oct",
                "Nov",
                "December"
            ],
        },
        lan: 'fr',


    },
     function (start, end, label) {
         debut = start.format('DD/MM/YYYY');
         fin = end.format('DD/MM/YYYY');
     }
    );
});
</script>
<script>
        $('#datePicker')
               .daterangepicker({
                   singleDatePicker: true,
                   locale: {
                       setDate: new Date(),
                       format: 'DD/MM/YYYY',
                       "daysOfWeek": [
            "Dim",
            "Lun",
            "Mar",
            "Mer",
            "Jeu",
            "Ven",
            "Sam"
                       ],
                       "monthNames": [
                           "Jan",
                           "Fev",
                           "Mar",
                           "Avr",
                           "Mai",
                           "Ju",
                           "Jui",
                           "Aou",
                           "Sep",
                           "Oct",
                           "Nov",
                           "December"
                       ],
                   },
                  // lan: 'fr',
                   autoclose: true,
               })
               .on('changeDate', function (e) {
                   $('#datepicker').hide();
               });

</script>

<script type="text/javascript">
    $(document).ready(function () {
        $(document).on("click", "#imedSave", function () {
            $("#explore1").hide();
            $("#loadimage").show();
            $.ajax({
                url: "/Superviseur/FindRechercheTel",
                type:'GET',
                dataType: 'HTML',
                async: true,
                data:
                    {
                        tel: $("#tel").val(),
                        //indice: $("#indice").val(),
                        roleName: $("#roleName").val(),
                        //date: $("#datePicker").val(),
                        start: debut,
                        end:fin,
                    },
                success: function (data) {
                    $("#tel").val('');
                    $("#indice").val('');
                    $('#explore1').html(data);
                    $('#errorFile').modal('show');
                    $('#errorFile2').modal('show');
                    $("#emptyField").modal('show');
                    //alert($("#tel").val());
                },
                complete: function () {
                    //$("#loadimage").empty();
                    $("#loadimage").hide();
                    $("#explore1").show();
                }

            })

        });
    
    
    });
</script>
}
@section pagetitle{
    <h4> <span class="text-semibold">Accès aux Enregistrements</span> -@Model.roleName  </h4>
}
@section pagetitlebody{
    <li><a href="#"><i class="icon-home2 position-left"></i> Accès aux Enregistrements</a></li>
    <li class="active">Par Numéro de Télephone</li>

}
@section testProfile{

    <a class="dropdown-toggle" data-toggle="dropdown">
        <img src=@Model.Url alt="">
        <span>@Model.userName</span>
        <i class="caret"></i>
    </a>
    <ul class="dropdown-menu dropdown-menu-right">

        <li><a href="@Url.Action("logout", "Authentification")"><i class="icon-switch2"></i> Logout</a></li>
    </ul>
}
@section sidebarProfile{

    <a href="#" class="media-left"><img src=@Model.Url class="img-circle img-sm" alt=""></a>
    <div class="media-body">
        <span class="media-heading text-semibold">@Model.userName</span>
        <div class="text-size-mini text-muted">
            <i class="icon-user text-size-small"></i> &nbsp;@Model.pseudoNameEmp
        </div>
    </div>
    <div class="media-right media-middle">

    </div>
}