@model MVCWEB.Models.EvaluationViewModel

@if (ViewBag.role == "Qualité")
{
    ViewBag.Title = "BPPTypologieVecteurPlus";

    Layout = "~/Views/Shared/_Layout_Qualite.cshtml";
}
@if (ViewBag.role == "Agent Qualité")
{
    ViewBag.Title = "BPPTypologieVecteurPlus";

    Layout = "~/Views/Shared/_Layout_AgentQualite.cshtml";
}
<link href="~/Content/bootstrap-datetimepicker.css" rel="stylesheet" type="text/css" />

@section test{
    <script type="text/javascript" src="~/Scripts/bootstrap-datetimepicker.js" charset="utf-8"></script>

    <script type='text/javascript'>

		$( document ).ready(function() {
		    $('#planDate').datetimepicker({

		        format: 'YYYY-MM-DD HH:mm',
		        daysOfWeekDisabled: [0, 6],
		    });
		});

    </script>

    <div class="form-horizontal">
        <div class="row">

            <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"> <b>Nom Complet d'enregistrement</b></font></h6>
            <div class="col-xs-4 date">
                @Html.EditorFor(model => model.enregistrementFullName, new { htmlAttributes = new { @class = "form-control", @id = "listen", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.enregistrementFullName, "", new { @class = "text-danger" })
            </div>
            <div class="col-xs-4 date" hidden>
                @Html.EditorFor(model => model.enregistrementUrl, new { htmlAttributes = new { @class = "form-control", @id = "listen2" } })
                @Html.ValidationMessageFor(model => model.enregistrementUrl, "", new { @class = "text-danger" })
            </div>
            <div class="col-xs-4 date" hidden>
                @Html.EditorFor(model => model.enregistrementDirectory, new { htmlAttributes = new { @class = "form-control", @id = "listen3" } })
                @Html.ValidationMessageFor(model => model.enregistrementDirectory, "", new { @class = "text-danger" })
            </div>

        </div>
    </div>

    <div class="row">
        <div class="col-1">
            <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Nom Agent:</b></font></h6>
            <div class="col-xs-4">

                @Html.EditorFor(model => model.agentName, new { htmlAttributes = new { @class = "form-control", @id = "nomAgent", @readonly = "readonly" } })
                @Html.ValidationMessageFor(model => model.agentName, "", new { @class = "text-danger" })
            </div>
        </div>
    </div>

    <div class="row">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"> <b>Date et temps d'évaluation</b></font></h6>
        <div class="col-xs-4 date" style="width:25%">
            <div class="input-group input-append date">
                <input type='text' id='planDate' name="planDate" class="form-control" value="01/06/2018 08:00" lang="fr" style="min-width: 100%" />
                <span class="input-group-addon add-on"><span class="glyphicon glyphicon-calendar"></span></span>
            </div>
        </div>
    </div>
    
    <div class="row" id="nombreLogementRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Nombre Logements</b> </font> </h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="nombreLogement" name="nombreLogement" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="nombreLogementRs" name="nombreLogementRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="nombreSociauxRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Nombre Sociaux</b> </font> </h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="nombreSociaux" name="nombreSociaux" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>

            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="nombreSociauxRs" name="nombreSociauxRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>

            </select>
        </div>
    </div>
</div>


<div class="row" id="typeCommerceRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Type Commerce</b> </font> </h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeCommerce" name="typeCommerce" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeCommerceRs" name="typeCommerceRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="typeIndustrieRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Type Industrie</b></font> </h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeIndustrie" name="typeIndustrie" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeIndustrieRs" name="typeIndustrieRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="typeEtablissementSanteRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Type d'établissement santé</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeEtablissementSante" name="typeEtablissementSante" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeEtablissementSanteRs" name="typeEtablissementSanteRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="typeAcceuilRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Type d'accueil (Santé)</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeAcceuil" name="typeAcceuil" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeAcceuilRs" name="typeAcceuilRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="capaciteAcceuilSanteRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Capacité d'accueil (Santé)</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="capaciteAcceuilSante" name="capaciteAcceuilSante" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="capaciteAcceuilSanteRs" name="capaciteAcceuilSanteRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="typeEtablissementHRRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Type d'établissement HR</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeEtablissementHR" name="typeEtablissementHR" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeEtablissementHRRs" name="typeEtablissementHRRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="nombreEtoileRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Nombre d'étoile (HR)</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="nombreEtoile" name="nombreEtoile" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="nombreEtoileRs" name="nombreEtoileRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="typeEnseignementRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Type d'enseignement</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeEnseignement" name="typeEnseignement" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeEnseignementRs" name="typeEnseignementRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="capaciteAcceuilEnseignementRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Capacité d'accueil (Enseignement)</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="capaciteAcceuilEnseignement" name="capaciteAcceuilEnseignement" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="capaciteAcceuilEnseignementRs" name="capaciteAcceuilEnseignementRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="typeLoisirsRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Type de loisirs</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeLoisirs" name="typeLoisirs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="typeLoisirsRs" name="typeLoisirsRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="frigorifiqueRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Frigorifique (Stockage)</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="frigorifique" name="frigorifique" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="frigorifiqueRs" name="frigorifiqueRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>


<div class="row" id="plateformeLogistiqueRow">
    <div class="col-1">
        <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Plateforme Logistique (Stockage)</b></font></h6>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="plateformeLogistique" name="plateformeLogistique" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
        <div class="col-xs-4">
            <select class="bootstrap-select" id="plateformeLogistiqueRs" name="plateformeLogistiqueRs" style="height: 45px;">
                <option value="1">OUI</option>
                <option value="0">NON</option>
                <option value="-1">NE</option>
            </select>
        </div>
    </div>
</div>
    <br />
    <div class="row" id="commentaireRow">
        <div class="col-xs-10">
            <div class="form-group">
                <h6 style="width:25%" class="col-xs-1 control-label"><font color="black"><b>Commentaire</b></font></h6>
                <textarea id="commentaire" name="commentaire" rows="5" cols="5" class="form-control" placeholder="Entrer votre commentaire"></textarea>
            </div>
        </div>
    </div>
    <br /><br />
    <center>
        <div class="text-md-center" id="imedSaveRow">
            <button type="submit" id="imedCalcul" class="btn bg-teal-400" data-toggle="modal">Evaluer Enregistrement <i class="icon-check position-fixed"></i></button>
            <button type="submit" id="imedSave" class="btn bg-danger-400" data-title="Sauvegarder Alerte">Sauvegarder et Envoyer Mail <i class="icon-arrow-right14 position-fixed"></i></button>

        </div>
    </center>
    <div id="view"></div>
    <br /><br />

    <script>
        $('#datePicker')
               .daterangepicker({
                   singleDatePicker: true,
                   autoApply: true,
                   opens: 'left',

                   locale: {
                       setDate: new Date(),
                       format: 'DD/MM/YYYY hh:mm:ss',
                       "daysOfWeek": [
            "Dim",
            "Lun",
            "Mar",
            "Mer",
            "Jeu",
            "Ven",
            "Sam"
                       ],
                       "monthNames": [
                           "Jan",
                           "Fev",
                           "Mar",
                           "Avr",
                           "Mai",
                           "Ju",
                           "Jui",
                           "Aou",
                           "Sep",
                           "Oct",
                           "Nov",
                           "December"
                       ],
                   },
                   lan: 'fr',
                   autoclose: true,
               })
               .on('changeDate', function (e) {
                   $('#datepicker').hide();
               });

    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $(document).on("click", "#imedCalcul", function () {

                $.ajax({
                    url: '/EvaluationVecteurPlus/CalculBPPTypologieVecteurPlus',
                    type: 'GET',
                    datatype: 'json',
                    data: {
                        nomAgent: $("#nomAgent").val(),
                        planDate: $("#planDate").val(),

                        nombreLogement: $("#nombreLogement").val(),
                        nombreSociaux: $("#nombreSociaux").val(),
                        typeCommerce: $("#typeCommerce").val(),
                        typeIndustrie: $("#typeIndustrie").val(),
                        typeEtablissementSante: $("#typeEtablissementSante").val(),
                        typeAcceuil: $("#typeAcceuil").val(),
                        capaciteAcceuilSante: $("#capaciteAcceuilSante").val(),
                        typeEtablissementHR: $("#typeEtablissementHR").val(),
                        nombreEtoile: $("#nombreEtoile").val(),
                        typeEnseignement: $("#typeEnseignement").val(),
                        capaciteAcceuilEnseignement: $("#capaciteAcceuilEnseignement").val(),
                        typeLoisirs: $("#typeLoisirs").val(),
                        frigorifique: $("#frigorifique").val(),
                        plateformeLogistique: $("#plateformeLogistique").val(),
                        //
                        nombreLogementRs: $("#nombreLogementRs").val(),
                        nombreSociauxRs: $("#nombreSociauxRs").val(),
                        typeCommerceRs: $("#typeCommerceRs").val(),
                        typeIndustrieRs: $("#typeIndustrieRs").val(),
                        typeEtablissementSanteRs: $("#typeEtablissementSanteRs").val(),
                        typeAcceuilRs: $("#typeAcceuilRs").val(),
                        capaciteAcceuilSanteRs: $("#capaciteAcceuilSanteRs").val(),
                        typeEtablissementHRRs: $("#typeEtablissementHRRs").val(),
                        nombreEtoileRs: $("#nombreEtoileRs").val(),
                        typeEnseignementRs: $("#typeEnseignementRs").val(),
                        capaciteAcceuilEnseignementRs: $("#capaciteAcceuilEnseignementRs").val(),
                        typeLoisirsRs: $("#typeLoisirsRs").val(),
                        frigorifiqueRs: $("#frigorifiqueRs").val(),
                        plateformeLogistiqueRs: $("#plateformeLogistiqueRs").val(),

                        commentaire: $("#commentaire").val(),
                        enregistrement: $("#listen").val(),
                        enregistrementUrl: $("#listen2").val(),
                        enregistrementDirectory: $("#listen3").val()
                    },
                    async: true,
                    success: function (data) {
                        $('#view').html(data);
                        $('#BPPTypologieResult').modal('show');
                    },
                });
            })
        })

        $(document).ready(function () {
            $(document).on("click", "#imedSave", function () {

                $.ajax({
                    url: '/EvaluationVecteurPlus/SaveEvalBPPTypologieVecteurPlus',
                    type: 'GET',
                    datatype: 'json',
                    data: {
                        nomAgent: $("#nomAgent").val(),
                        planDate: $("#planDate").val(),

                        nombreLogement: $("#nombreLogement").val(),
                        nombreSociaux: $("#nombreSociaux").val(),
                        typeCommerce: $("#typeCommerce").val(),
                        typeIndustrie: $("#typeIndustrie").val(),
                        typeEtablissementSante: $("#typeEtablissementSante").val(),
                        typeAcceuil: $("#typeAcceuil").val(),
                        capaciteAcceuilSante: $("#capaciteAcceuilSante").val(),
                        typeEtablissementHR: $("#typeEtablissementHR").val(),
                        nombreEtoile: $("#nombreEtoile").val(),
                        typeEnseignement: $("#typeEnseignement").val(),
                        capaciteAcceuilEnseignement: $("#capaciteAcceuilEnseignement").val(),
                        typeLoisirs: $("#typeLoisirs").val(),
                        frigorifique: $("#frigorifique").val(),
                        plateformeLogistique: $("#plateformeLogistique").val(),
                        //
                        nombreLogementRs: $("#nombreLogementRs").val(),
                        nombreSociauxRs: $("#nombreSociauxRs").val(),
                        typeCommerceRs: $("#typeCommerceRs").val(),
                        typeIndustrieRs: $("#typeIndustrieRs").val(),
                        typeEtablissementSanteRs: $("#typeEtablissementSanteRs").val(),
                        typeAcceuilRs: $("#typeAcceuilRs").val(),
                        capaciteAcceuilSanteRs: $("#capaciteAcceuilSanteRs").val(),
                        typeEtablissementHRRs: $("#typeEtablissementHRRs").val(),
                        nombreEtoileRs: $("#nombreEtoileRs").val(),
                        typeEnseignementRs: $("#typeEnseignementRs").val(),
                        capaciteAcceuilEnseignementRs: $("#capaciteAcceuilEnseignementRs").val(),
                        typeLoisirsRs: $("#typeLoisirsRs").val(),
                        frigorifiqueRs: $("#frigorifiqueRs").val(),
                        plateformeLogistiqueRs: $("#plateformeLogistiqueRs").val(),

                        commentaire: $("#commentaire").val(),
                        enregistrement: $("#listen").val(),
                        enregistrementUrl: $("#listen2").val(),
                        enregistrementDirectory: $("#listen3").val()
                    },
                    async: true,
                    success: function (data) {
                        $('#view').html(data);
                        $('#EnvoiMailResult').modal('show');
                    },
                });
            })
        })

    </script>

}

@section testProfile{

    <a class="dropdown-toggle" data-toggle="dropdown">
        <img src=@Model.Url alt="">
        <span>@Model.userName</span>
        <i class="caret"></i>
    </a>
    <ul class="dropdown-menu dropdown-menu-right">

        <li><a href="@Url.Action("logout", "Authentification")"><i class="icon-switch2"></i> Logout</a></li>
    </ul>
}
@section sidebarProfile{

    <a href="#" class="media-left"><img src=@Model.Url class="img-circle img-sm" alt=""></a>
    <div class="media-body">
        <span class="media-heading text-semibold">@Model.userName</span>
        <div class="text-size-mini text-muted">
            <i class="icon-user text-size-small"></i> &nbsp;@Model.pseudoNameEmp
        </div>
    </div>
    <div class="media-right media-middle">

    </div>
}
@section pagetitle{
    <h4> <span class="text-semibold">Espace Qualité</span> -  Grille d'évaluation</h4>
}
@section pagetitlebody{
    <li><a href="#"><i class="icon-home2 position-left"></i> Grille d'évaluation</a></li>
    <li class="active">Vecteur Plus / BPP Typologie</li>
}