@model  MVCWEB.Models.EvaluationVecteurPlusViewModel
<br />
<div class="row">
    <div class="col-md-12" id="myChart3"></div>
</div>

<br />

<div class="panel border-left-lg border-left-info" style="margin-left: 0.2cm;">
    <div class="panel-body">
        <h6 class="no-margin-top"><a href="task_manager_detailed.html"># Moyenne Items</a></h6>
        <div class="row">
            <div class="col-md-4">

                <div class="form-group">
                    <label class="col-md-7" style="font-weight: bold;">Présentation et Identification:</label>
                    <div class="col-md-3">
                        @Model.presentationIdentification%
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Présenter l'objet de l'appel:</label>
                    <div class="col-md-3">
                        @Model.objetAppel%
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Validation et confirmation de la Nature :</label>
                    <div class="col-md-3">
                        @if (@Model.validationNature >= 0)
                        {
                            <span>@Model.validationNature%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Calendrier:</label>
                    <div class="col-md-3">

                        @if (@Model.calendrier >= 0)
                        {
                            <span>@Model.calendrier%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Envergure:</label>
                    <div class="col-md-3">

                        @if (@Model.envergure >= 0)
                        {
                            <span>@Model.envergure%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Complétude des questions par Typologie:</label>
                    <div class="col-md-3">
                        @if (@Model.complétudeQuestions >= 0)
                        {
                            <span>@Model.complétudeQuestions%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>

            </div>

            <div class="col-md-4">
               
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Confirmation des intervenants:</label>
                    <div class="col-md-3">

                        @if (@Model.confirmationIntervenants >= 0)
                        {
                            <span>@Model.confirmationIntervenants%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Enchainement logique des questions:</label>
                    <div class="col-md-3">

                        @if (@Model.enchainementQuestions >= 0)
                        {
                            <span>@Model.enchainementQuestions%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Traitement des objections:</label>
                    <div class="col-md-3">
                        @if (@Model.traitementObjections >= 0)
                        {
                            <span>@Model.traitementObjections%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Reformulation:</label>
                    <div class="col-md-3">

                        @if (@Model.reformulation >= 0)
                        {
                            <span>@Model.reformulation%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Transcription des informations:</label>
                    <div class="col-md-3">

                        @if (@Model.transcriptionsInformations >= 0)
                        {
                            <span>@Model.transcriptionsInformations%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br /> 
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Ajout des codes appropriés:</label>
                    <div class="col-md-3">

                        @if (@Model.codesAppropriés >= 0)
                        {
                            <span>@Model.codesAppropriés%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
            
            </div>

            <div class="col-md-4">
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Note Client / Historique:</label>
                    <div class="col-md-3">

                        @if (@Model.noteClient >= 0)
                        {
                            <span>@Model.noteClient%</span>
                        }
                        else
                        {
                            <span>NE</span>
                        }
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Discours:</label>
                    <div class="col-md-3">
                        @Model.discours%
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Empathie / Attitude:</label>
                    <div class="col-md-3">
                        @Model.attitude%
                    </div>
                </div>
                <br />
                <div class="form-group">
                    <label class="col-md-7" style="font-weight:bold;">Prise de congé:</label>
                    <div class="col-md-3">
                        @Model.priseConge%
                    </div>
                </div>
                <br />
            </div>
        </div>
    </div>
</div>


<div class="row">
    <div class="col-md-8">
        <div class="panel panel-flat">
            <div class="panel-heading">
                <h6 class="panel-title"><i class="icon-stats-bars3"></i> <span style="font-size: 16px;">Répartition Moyenne des Items BPP</span></h6><hr />
            </div>
            <div class="container-fluid">
                <div>
                    <div id="myChart"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="panel panel-flat">
            <div class="panel-heading">
                <h6 class="panel-title"><i class="icon-pie-chart"></i> <span style="font-size: 16px;">Moyenne des Notes </span></h6><hr />
            </div>
            <div class="container-fluid">
                <div>
                    <div id="myChartPie"></div>
                </div>
            </div>
        </div>
    </div>

</div>
<script>
    $(document).ready(function () {
        var namesList = ["Presentation", "Objet de l'appel", "Validation Nature", "Calendrier", "Envergure", "Complétude des Questions", "Confirmation Intervenants",
        "Enchainement des Questions", "Traitement des objections", "Reformulation", "Transcription des informations", "Codes Appropriés","Note Client", "Discours", "Empathie / Attitude", "Prise de congé"];
        var values = [@Model.presentationIdentification, @Model.objetAppel, @Model.validationNature, @Model.calendrier, @Model.envergure,@Model.complétudeQuestions,
        @Model.confirmationIntervenants,@Model.enchainementQuestions,@Model.traitementObjections,@Model.reformulation,@Model.transcriptionsInformations,@Model.codesAppropriés,@Model.noteClient,@Model.discours,@Model.attitude,@Model.priseConge];
        var valuesList = [];
        $.each(values, function (i, t)
        {
            if(t>=0){
                valuesList.push(t);
            }
            else{
                valuesList.push(null);
            }
        })           
        let chartConfig = {
                        backgroundColor: '#ecf2f6',
                        graphset: [
                          {
                              type: 'bar',
                              backgroundColor: '#fff',
                              borderWidth: '1px',
                              borderColor: '#dae5ec',
                              width: '100%',
                              height: '100%',
                              x: '0%',
                              y: '0%',

                              plot: {
                                  tooltip: {
                                      padding: '5px 10px',
                                      backgroundColor: '#707e94',
                                      borderRadius: '6px',
                                      fontColor: '#fff',
                                      fontFamily: 'Arial',
                                      fontSize: '11px',
                                      shadow: false
                                  },
                                  animation: {
                                      delay: 300,
                                      effect: 'ANIMATION_SLIDE_BOTTOM'
                                  },
                                  barWidth: '33px',
                                  hoverState: {
                                      visible: false
                                  }
                              },
                              plotarea: {
                                  margin: '45px 20px 120px 45px'
                              },
                              scaleX: {
                                  values: namesList,
                                  guide: {
                                      visible: false
                                  },
                                  item: {
                                      angle: -50,
                                      paddingTop: '2px',
                                      fontColor: '#000',
                                      fontFamily: 'Arial',
                                      fontSize: '11px'
                                  },
                                  itemsOverlap: true,
                                  lineColor: '#d2dae2',
                                  maxItems: 9999,
                                  offsetY: '1px',
                                  tick: {
                                      lineColor: '#d2dae2',
                                      visible: false
                                  }
                              },
                              scaleY: {
                                  values: '0:100:50',
                                  guide: {
                                      rules: [
                                        {
                                            lineWidth: '0px',
                                            rule: '%i == 0'
                                        },
                                        {
                                            alpha: 0.4,
                                            lineColor: '#d2dae2',
                                            lineStyle: 'solid',
                                            lineWidth: '1px',
                                            rule: '%i > 0'
                                        }
                                      ]
                                  },
                                  item: {
                                      paddingRight: '5px',
                                      fontColor: '#8391a5',
                                      fontFamily: 'Arial',
                                      fontSize: '10px'
                                  },
                                  lineColor: 'none',
                                  maxItems: 4,
                                  maxTicks: 4,
                                  tick: {
                                      visible: false
                                  }
                              },
                              series: [
                                {
                                    values: valuesList,
                                    backgroundColor: '#f3950d',
                                    valueBox: [{
                                        placement: "top-out",
                                        color: "#000",
                                        text: "%v%",
                                        fontSize: 14
                                    }]
                                }
                              ]
                          }
                        ]
                    }

                    zingchart.render({
                        id: 'myChart',
                        data: chartConfig,
                        height: '500',
                        width: '100%'
                    });

        var diff = 100 - @Model.note;
                    var myConfig = {
                        "background-color": "#FFF",
                        "graphset": [

                            {
                                "type": "pie",
                                "width": "105%",
                                "x": "-20%",
                                "background-color": "#FFF",
                                "title": {
                                    "background-color": "none",
                                    "font-weight": "normal",
                                    "font-family": "Arial",
                                    "font-color": "#ffffff",
                                    "height": "30px"
                                },

                                "plotarea": {
                                    "margin": "20 280 25 30"
                                },

                                "plot": {
                                    "animation": {
                                        "delay": 0,
                                        "effect": 2,
                                        "speed": 700,
                                        "method": 6,
                                        "sequence": 1
                                    },
                                    refAngle: 270,

                                },
                                "series": [
                                    {
                                        "text": "Moyenne Notes",
                                        "values": [@Model.note],
                                        "background-color": "#35D884",
                                        "border-color": "#454754",
                                        "border-width": "1px",
                                        "shadow": 0,
                                        "tooltip": {
                                            "background-color": "#35D884",
                                            "font-color": "#000",
                                            "border-radius": "6px",
                                            "shadow": false,
                                            "padding": "5px 10px"
                                        },
                                        valueBox: [{
                                            placement: "in",
                                            color: "#000",
                                            text: "%t: %v %",
                                            fontSize: 14
                                        }]
                                    },

                                          {
                                              "text": "",
                                              "values": [
                                             diff
                                              ],
                                              "background-color": "#E8E8E8",
                                              "border-color": "#454754",
                                              "border-width": "1px",
                                              "shadow": 0,
                                              "tooltip": {
                                                  "background-color": "#E8E8E8",
                                                  "font-color": "#000",
                                                  "border-radius": "6px",
                                                  "shadow": false,
                                                  "padding": "5px 10px"
                                              },
                                              valueBox: [{
                                                  placement: "in",
                                                  color: "#E8E8E8",
                                                  text: "%t: %v %",
                                                  fontSize: 14
                                              }]
                                          }
                                ]
                            },
                        ]
                    }
                    zingchart.render({
                        id: 'myChartPie',
                        data: myConfig,
                        height: 500,
                        width: 1050
                    });

                    let chartConfig3 = {
                        graphset: [
                            {
                                type: 'null',
                                backgroundColor: '#fbfcf7',
                                borderColor: '#384653',
                                borderRadius: '4px',
                                borderWidth: '1px',
                                width: '15%',
                                height: '90%',
                                x: '33.2%',
                                y: '3%',
                                title: {
                                    text: 'Nombre des Evaluations',
                                    backgroundColor: 'none',
                                    fontColor: '#384653',
                                    fontSize: '12px',
                                    height: '70px',
                                    textAlign: 'center'
                                },
                                subtitle: {
                                    text:  @ViewBag.nbreEvaluations,
                                    paddingTop: '35%',
                                    bold: true,
                                    fontColor: '#dd655f',
                                    fontSize: '24px',
                                    height: '40px',
                                    textAlign: 'center'
                                }
                            },
                          {
                              type: 'null',
                              backgroundColor: '#fbfcf7',
                              borderColor: '#384653',
                              borderRadius: '4px',
                              borderWidth: '1px',
                              width: '15%',
                              height: '90%',
                              x: '50.8%',
                              y: '3%',
                              title: {
                                  text: 'Moyenne des Notes',
                                  backgroundColor: 'none',
                                  fontColor: '#384653',
                                  fontSize: '12px',
                                  height: '70px',
                                  textAlign: 'center'
                              },
                              subtitle: {
                                  text:@Model.note + '%',
                                  paddingTop: '35%',
                                  bold: true,
                                  fontColor: '#4cc2bb',
                                  fontSize: '24px',
                                  height: '40px',
                                  textAlign: 'center'
                              }
                          }
                        ]
                    };
                    zingchart.render({
                        id: 'myChart3',
                        data: chartConfig3,
                        height: '120',
                        width: '100%'
                    });
    })
</script> 